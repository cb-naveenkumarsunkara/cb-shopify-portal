import{d as B,f as o,g as c,h as e,t as s,s as b,G as F,u as E,x as O,c as z,b as L,j as n,l as t,D as H,F as G,i as J,w as f,k as U,a as K,H as Q,v as y,I as W,r as X,o as Y,y as Z,J as tt}from"./index.js";import{_ as M}from"./plugin-vue_export-helper.js";import{C as et}from"./CreateHeader.js";import{S as st}from"./Spinner.js";import{M as at}from"./MethodCard.js";const it={class:"c-portal-card"},ot={class:"c-shopify-header c-display-flex c-justify-space-between"},S=B({props:{title:null,description:null,action:null},setup(g){return(v,d)=>(o(),c("section",it,[e("div",ot,[e("span",null,s(g.title),1),g.action?(o(),c("a",{key:0,onClick:d[0]||(d[0]=k=>v.$emit(g.action.method))},s(g.action.link),1)):b("",!0)]),F(v.$slots,"default")]))}});const ct={class:"c-breadcrumb-container"},rt={key:0,class:"c-breadcrumb-separator"},nt=B({setup(g){const v=E(),d=O(),k=z(()=>{var _;return((_=v.meta)==null?void 0:_.breadcrumbs)||[]}),N=()=>{const _=k.value[k.value.length-1].routeName;d.push({name:_,query:{customer_id:v.query.customer_id}})};return(_,D)=>{const u=L("router-link");return o(),c("section",ct,[n(t(H),{class:"c-breadcrumb-back c-cursor-pointer",onClick:N}),(o(!0),c(G,null,J(t(k),(i,q)=>(o(),c("span",null,[q?(o(),c("span",rt,"/")):b("",!0),n(u,{to:{name:i.routeName,query:{customer_id:_.$route.query.customer_id}},class:"c-breadcrumb-link"},{default:f(()=>[U(s(_.$t(i.label)),1)]),_:2},1032,["to"])]))),256))])}}});var lt=M(nt,[["__scopeId","data-v-29ce7164"]]);const dt={class:"c-subscription-detail__wrapper"},ut={key:1},_t={class:"c-subscription-detail__content c-display-flex"},pt={class:"c-details__left c-flex-1"},mt={class:"c-product-details__wrapper"},ht={class:"c-product-details__image"},yt=["src"],bt={class:"c-product-details__content"},vt={class:"c-shopify-header"},ft={class:"c-shopify-caption"},gt={class:"c-product-details__qty"},kt={class:"c-product-details__quantity"},$t={class:"c-product-details__price"},Ct={class:"c-product__next-order"},Pt={class:"c-font-bold c-text-700"},It={class:"c-font-bold c-text-700"},xt={class:"c-text-500 c-shipping-address"},St={key:0},qt={key:1},wt={key:0},Nt={key:1},Bt={key:2},Dt={key:3},Tt={class:"c-details__right"},Vt={class:"c-subscription-costs_product c-display-flex c-justify-space-between"},jt={class:"c-subscription-costs_total c-display-flex c-justify-space-between"},Et=B({setup(g){const v=E(),d=K(),{t:k}=Q(),N=y(()=>d.getters.authToken),_=y(()=>d.getters.urlParams),D=y(()=>d.getters.isViewLoading),u=y(()=>d.getters.subscriptionDetail),i=y(()=>{var a,$;return($=(a=u.value)==null?void 0:a.subscriptionLineItems)==null?void 0:$.subscriptionLineItems[0]}),q=y(()=>{var a,$,w,l;return W(($=(a=u.value)==null?void 0:a.billingPolicy)==null?void 0:$.intervalCount,(l=(w=u.value)==null?void 0:w.billingPolicy)==null?void 0:l.interval)}),A=y(()=>{var a;return k("portal.subscription_details.title",{name:(a=i.value)==null?void 0:a.title,period:q.value})}),r=y(()=>{var a;return((a=u.value)==null?void 0:a.shippingAddress)||{}}),T=X(!1);Y(async()=>{var a;await d.dispatch("fetchSubscriptionDetail",{subscriptionId:v.query.subscription_id,authenticationToken:N.value,customerId:(a=_.value)==null?void 0:a.customer_id})});const R=()=>{T.value=!0};return(a,$)=>{const w=L("i18n-t");return o(),c("div",dt,[n(lt),t(D)?(o(),Z(st,{key:0,fill:"#4F46E5",class:"c-spinner"})):(o(),c("div",ut,[n(et,{title:t(A)},null,8,["title"]),e("div",_t,[e("div",pt,[n(S,{title:a.$t("portal.subscription_details.product_details"),class:"c-product-card"},{default:f(()=>{var l,p,m,h,C,P,I,x;return[e("div",mt,[e("div",ht,[e("img",{src:(l=t(i))==null?void 0:l.variantImage},null,8,yt)]),e("div",bt,[e("p",vt,s((p=t(i))==null?void 0:p.title),1),e("p",ft,s((m=t(i))==null?void 0:m.variantTitle),1),e("div",gt,[e("span",kt,s(a.$t("portal.units"))+": "+s((h=t(i))==null?void 0:h.quantity),1),e("span",$t,s((P=(C=t(i))==null?void 0:C.currentPrice)==null?void 0:P.currencyCode)+" "+s((x=(I=t(i))==null?void 0:I.currentPrice)==null?void 0:x.amount),1)])])])]}),_:1},8,["title"]),e("section",Ct,[n(t(tt),{class:"c-icon__truck"}),n(w,{keypath:"portal.subscription_details.next_order",tag:"span"},{date:f(()=>[e("strong",null,s(t(u).nextOrderDate),1)]),_:1})]),n(S,{title:a.$t("portal.subscription_details.order_frequency"),class:"c-mb-16"},{default:f(()=>[e("p",Pt,s(t(q)),1)]),_:1},8,["title"]),n(S,{title:a.$t("portal.subscription_details.shipping_address"),class:"c-mb-16"},{default:f(()=>{var l,p,m,h;return[e("div",It,s((p=(l=t(u))==null?void 0:l.shippingAddress)==null?void 0:p.firstName)+" "+s((h=(m=t(u))==null?void 0:m.shippingAddress)==null?void 0:h.lastName),1),e("div",xt,[e("div",null,[t(r).address1?(o(),c("span",St,s(t(r).address1),1)):b("",!0),t(r).address2?(o(),c("span",qt,s(t(r).address2),1)):b("",!0)]),t(r).zipCode?(o(),c("span",wt,s(t(r).zipCode),1)):b("",!0),t(r).city?(o(),c("span",Nt,s(t(r).city),1)):b("",!0),t(r).province?(o(),c("span",Bt,s(t(r).province),1)):b("",!0),t(r).country?(o(),c("span",Dt,s(t(r).country),1)):b("",!0)])]}),_:1},8,["title"]),n(S,{title:a.$t("portal.payment_methods"),action:!T.value&&{link:a.$t("portal.common.edit"),method:"editPayment"},onEditShipping:R,class:"c-mb-16"},{default:f(()=>[n(at,{"is-editable":!1,pm:t(u).customerPaymentMethod},null,8,["pm"])]),_:1},8,["title","action"])]),e("div",Tt,[n(S,{title:a.$t("portal.subscription_details.subscription_costs"),class:"c-subscription-costs_wrapper"},{default:f(()=>{var l,p,m,h,C,P,I,x,V,j;return[e("div",Vt,[e("span",null,s((l=t(i))==null?void 0:l.title)+" x "+s((p=t(i))==null?void 0:p.quantity),1),e("strong",null,s((h=(m=t(i))==null?void 0:m.currentPrice)==null?void 0:h.currencyCode)+" "+s((P=(C=t(i))==null?void 0:C.currentPrice)==null?void 0:P.amount),1)]),e("div",jt,[e("span",null,s(a.$t("portal.subscription_details.sub_total")),1),e("strong",null,s((x=(I=t(i))==null?void 0:I.currentPrice)==null?void 0:x.currencyCode)+" "+s((j=(V=t(i))==null?void 0:V.currentPrice)==null?void 0:j.amount),1)])]}),_:1},8,["title"])])])]))])}}});var Ot=M(Et,[["__scopeId","data-v-5b4d40ec"]]);export{Ot as default};
