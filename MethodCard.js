import{d as H,H as I,r as C,v as i,a as L,f as r,g as p,h as e,l as s,t as o,F as g,k as c,s as _,y as Y,w as b,z as k,j as $,S as q}from"./index.js";import{_ as z}from"./plugin-vue_export-helper.js";var B="https://cb-shopify-portal.netlify.app/visa.svg",E="https://cb-shopify-portal.netlify.app/jcb.svg",K="https://cb-shopify-portal.netlify.app/mastercard.svg",Q="https://cb-shopify-portal.netlify.app/unionpay.svg",W="https://cb-shopify-portal.netlify.app/amex.svg",X="https://cb-shopify-portal.netlify.app/dinersclub.svg",Z="https://cb-shopify-portal.netlify.app/discover.svg",D="https://cb-shopify-portal.netlify.app/paypal.svg",N="https://cb-shopify-portal.netlify.app/apple-pay.svg",A="https://cb-shopify-portal.netlify.app/google-pay.svg",R="https://cb-shopify-portal.netlify.app/shop-pay.svg",tt="https://cb-shopify-portal.netlify.app/card.svg",P=(a=>(a.visa="Visa",a.mastercard="MasterCard",a.american_express="American Express",a.discover="Discover",a.diners_club="Diners Club",a.jcb="JCB",a.unionpay="UnionPay",a.unknown="Card",a))(P||{});const et={class:"pm-container"},at={class:"pm-info-wrapper"},st={class:"pm-info"},ot=["src"],nt={class:"pm-title"},it={class:"pm-status"},rt={class:"pm-timeline"},lt={key:1},pt={key:0},ct={key:0,class:"pm-edit-container"},dt={class:"pm-edit-info"},mt={class:"pm-edit-note"},ut={class:"pm-edit-ctas"},ht=c(" Send update Email "),yt=c(" Cancel "),vt=H({props:{pm:Object,isEditable:{type:Boolean,required:!1,default:!0}},setup(a){const x=a,T={visa:B,jcb:E,american_express:W,diners_club:X,discover:Z,mastercard:K,unionpay:Q},{t:d}=I(),h=C(!1),y=C(!1),w=i(()=>{const{lastDigits:t,brand:n,paypalAccountEmail:S,source:G}=l.value;if(M)switch(G){case"apple_pay":return{title:d("portal.payment_method.card_ending",{method:"Apple Pay",lastDigits:t}),logo:N};case"google_pay":return{title:d("portal.payment_method.card_ending",{method:"GPay",lastDigits:t}),logo:A};default:return{title:d("portal.payment_method.card_ending",{method:P[n]||P.unknown,lastDigits:t}),logo:T[n]||tt}}else{if(J)return{title:`PayPal ${S}`,logo:D};if(O)return{title:`Shop Pay ending ${t}`,logo:R}}return{}}),{pm:v}=x,m=L(),V=i(()=>m.getters.authToken),j=i(()=>m.getters.urlParams);i(()=>m.getters.toast);const u=i(()=>(v==null?void 0:v.instrument)||{}),M=i(()=>!!u.value.customerCreditCard),J=i(()=>!!u.value.customerPaypalBillingAgreement),O=i(()=>!!u.value.customerShopPayAgreement),l=i(()=>u.value[Object.keys(u.value)[0]]||{});function f(){h.value=!h.value}function F(t=1){return["","Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][t]}async function U(){var t;y.value=!0;try{const{id:n}=v||{};if(n)await q.sendUpdatePaymentmethodMail(n,V.value,(t=j.value)==null?void 0:t.customer_id),m.dispatch("showToast",{message:d("portal.payment_method.send_edit_mail.success"),showToast:!0,variant:"success"}),f();else throw d("portal.something_went_wrong")}catch(n){m.dispatch("showToast",{message:n,showToast:!0,variant:"alert"})}finally{y.value=!1}}return(t,n)=>(r(),p("div",et,[e("div",at,[e("div",st,[e("img",{class:"pm-logo",src:s(w).logo,alt:"Payment method"},null,8,ot),e("div",null,[e("div",nt,o(s(w).title),1),e("div",it,[s(l).expiryMonth&&s(l).expiryYear?(r(),p(g,{key:0},[e("span",rt,[s(l).expired?(r(),p(g,{key:0},[c(o(t.$t("portal.payment_method.expired")),1)],64)):(r(),p(g,{key:1},[c(o(t.$t("portal.payment_method.valid_until")),1)],64))]),e("span",null,o(F(s(l).expiryMonth))+" "+o(s(l).expiryYear),1)],64)):s(l).inactive?(r(),p("span",lt,o(t.$t("shopify.subscriptions_page.details.payment_methods.inactice")),1)):_("",!0)])])]),a.isEditable?(r(),p("div",pt,[h.value?_("",!0):(r(),Y(s(k),{key:0,class:"pm-edit-btn",variant:"link",onClick:f},{default:b(()=>[c(o(t.$t("portal.common.edit")),1)]),_:1}))])):_("",!0)]),h.value?(r(),p("div",ct,[e("div",dt,[e("ul",null,[e("li",null,o(t.$t("portal.payment_method.send_edit_mail.title1")),1),e("li",null,o(t.$t("portal.payment_method.send_edit_mail.title2")),1),e("li",null,[e("span",mt,o(t.$t("portal.common.note"))+":",1),c(" "+o(t.$t("portal.payment_method.send_edit_mail.note")),1)])])]),e("div",ut,[$(s(k),{variant:"primary",class:"pm-edit-primary-cta",onClick:U,loading:y.value},{default:b(()=>[ht]),_:1},8,["loading"]),$(s(k),{variant:"link",disabled:y.value,onClick:f},{default:b(()=>[yt]),_:1},8,["disabled"])])])):_("",!0)]))}});var gt=z(vt,[["__scopeId","data-v-136a6568"]]);export{gt as M};
