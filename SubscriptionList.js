import{d as x,a as $,v as a,x as B,o as L,r as E,f as l,g as _,j as r,l as s,y as N,F as M,i as R,h as i,t as u,z as f,w as h,R as V,A as D,B as q,C as A,D as m,P as F}from"./index.js";import{C as H}from"./CreateHeader.js";import{S as j}from"./Spinner.js";import{_ as z}from"./plugin-vue_export-helper.js";const G=p=>(D("data-v-48f07b53"),p=p(),q(),p),O={class:"c-subscription-card"},U={key:1},J=G(()=>i("hr",null,null,-1)),K={class:"c-subscription-pagination"},Q={class:"c-subscription-button"},W={class:"c-subscription-button__content__text"},X={class:"c-subscription-button__content__text"},Y=x({setup(p){const v=F.SUBSCRIPTIONS,e=$(),b=a(()=>e.getters.authToken),d=a(()=>e.getters.urlParams),I=a(()=>e.getters.isViewLoading),k=B();L(async()=>{var t;await e.dispatch("listSubscription",{customerId:(t=d.value)==null?void 0:t.customer_id,authenticationToken:b.value})});const S=a(()=>!e.getters.subscriptions.pageInfo.hasPreviousPage),y=a(()=>!e.getters.subscriptions.pageInfo.hasNextPage),c=E(0),w=a(()=>e.getters.subscriptions),C=a(()=>Math.ceil(e.getters.subscriptions.pageInfo.maxCount/7)),P=a(()=>{const t=e.getters.subscriptions;return t.pageInfo.currentEnd%7===0?t.pageInfo.currentEnd/7:Math.floor(t.pageInfo.currentEnd/7)+1}),T=t=>{var o;k.push({name:"subscription_details",query:{subscription_id:t,customer_id:(o=d.value)==null?void 0:o.customer_id}})},g=async t=>{var o,n;switch(window.scrollTo(0,0),t){case"next":c.value=c.value+v,await e.dispatch("listSubscription",{customerId:(o=d.value)==null?void 0:o.customer_id,authenticationToken:b.value,after:c.value});break;case"prev":c.value=c.value-v,await e.dispatch("listSubscription",{customerId:(n=d.value)==null?void 0:n.customer_id,authenticationToken:b.value,after:c.value});break}};return(t,o)=>(l(),_("div",O,[r(H,{title:t.$t("portal.subscriptions")},null,8,["title"]),s(I)?(l(),N(j,{key:0})):(l(),_("div",U,[(l(!0),_(M,null,R(s(w).subscriptionList,n=>(l(),_("div",{key:n.id},[r(s(A),{key:"test",product:n,labels:{quantity:"units"},class:"c-shopify-subscriptions c-cursor-pointer",onClick:Z=>T(n.id)},null,8,["product","onClick"])]))),128)),J,i("div",K,[i("div",null,u(t.$t("portal.showing"))+" "+u(s(P))+" "+u(t.$t("portal.to"))+" "+u(s(C)),1),i("div",Q,[r(s(f),{onClick:o[0]||(o[0]=n=>g("prev")),disabled:s(S),class:"c-subscription-button__content"},{default:h(()=>[i("div",W,[r(s(m)),i("div",null,u(t.$t("portal.latest")),1)])]),_:1},8,["disabled"]),r(s(f),{onClick:o[1]||(o[1]=n=>g("next")),disabled:s(y),class:"c-subscription-button__content"},{default:h(()=>[i("div",X,[i("div",null,u(t.$t("portal.older")),1),r(s(m),{class:"c-subscription-front-arrow"})])]),_:1},8,["disabled"])])])])),r(s(V))]))}});var nt=z(Y,[["__scopeId","data-v-48f07b53"]]);export{nt as default};
