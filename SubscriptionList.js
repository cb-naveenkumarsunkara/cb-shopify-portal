import{defineComponent as I,openBlock as p,createElementBlock as d,toDisplayString as c,computed as o,onMounted as $,ref as E,createVNode as n,unref as e,Fragment as T,renderList as L,createElementVNode as i,withCtx as f,pushScopeId as N,popScopeId as M}from"vue";import{u as B,R as H,P as R}from"./index.js";import{d as V,t as F,y as h,i as m}from"./gelato.es.js";import{_ as k}from"./plugin-vue_export-helper.js";const q={class:"c-shopify-header"},A=I({props:{title:null},setup(u){return(_,s)=>(p(),d("div",q,c(u.title),1))}});var D=k(A,[["__scopeId","data-v-cee2722c"]]);const G=u=>(N("data-v-0622f086"),u=u(),M(),u),O={class:"c-subscription-card"},U={key:0,class:"c-spinner-container"},j={key:1},z=G(()=>i("hr",null,null,-1)),J={class:"c-subscription-pagination"},K={class:"c-subscription-button"},Q={class:"c-subscription-button__content__text"},W={class:"c-subscription-button__content__text"},X=I({setup(u){const _=R.SUBSCRIPTIONS,s=B(),v=o(()=>s.getters.authToken),b=o(()=>s.getters.urlParams),y=o(()=>s.getters.isSubscriptionLoading);$(async()=>{var t;await s.dispatch("listSubscription",{customerId:(t=b.value)==null?void 0:t.customer_id,authenticationToken:v.value})});const S=o(()=>!s.getters.subscriptions.pageInfo.hasPreviousPage),P=o(()=>!s.getters.subscriptions.pageInfo.hasNextPage),l=E(0),w=o(()=>s.getters.subscriptions),x=o(()=>Math.ceil(s.getters.subscriptions.pageInfo.maxCount/7)),C=o(()=>{const t=s.getters.subscriptions;return t.pageInfo.currentEnd%7===0?t.pageInfo.currentEnd/7:Math.floor(t.pageInfo.currentEnd/7)+1}),g=async t=>{var r,a;switch(t){case"next":l.value=l.value+_,await s.dispatch("listSubscription",{customerId:(r=b.value)==null?void 0:r.customer_id,authenticationToken:v.value,after:l.value});break;case"prev":l.value=l.value-_,await s.dispatch("listSubscription",{customerId:(a=b.value)==null?void 0:a.customer_id,authenticationToken:v.value,after:l.value});break}};return(t,r)=>(p(),d("div",O,[n(D,{title:t.$t("portal.subscriptions")},null,8,["title"]),e(y)?(p(),d("div",U,[n(e(V),{fill:"#4F46E5",class:"c-spinner"})])):(p(),d("div",j,[(p(!0),d(T,null,L(e(w).subscriptionList,a=>(p(),d("div",{key:a.id},[n(e(F),{key:"test",product:a,labels:{quantity:"units"},class:"c-shopify-subscriptions"},null,8,["product"])]))),128)),z,i("div",J,[i("div",null,c(t.$t("portal.showing"))+" "+c(e(C))+" "+c(t.$t("portal.to"))+" "+c(e(x)),1),i("div",K,[n(e(h),{onClick:r[0]||(r[0]=a=>g("prev")),disabled:e(S),class:"c-subscription-button__content"},{default:f(()=>[i("div",Q,[n(e(m)),i("div",null,c(t.$t("portal.latest")),1)])]),_:1},8,["disabled"]),n(e(h),{onClick:r[1]||(r[1]=a=>g("next")),disabled:e(P),class:"c-subscription-button__content"},{default:f(()=>[i("div",W,[i("div",null,c(t.$t("portal.older")),1),n(e(m),{class:"c-subscription-front-arrow"})])]),_:1},8,["disabled"])])])])),n(e(H))]))}});var st=k(X,[["__scopeId","data-v-0622f086"]]);export{st as default};
